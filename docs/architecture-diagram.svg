<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 900" width="1200" height="900">
  <defs>
    <!-- Gradients -->
    <linearGradient id="azureGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0078D4;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#005A9E;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="vnetGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#E8F4FD;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#CCE4F7;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="subnetGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FFFFFF;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#F0F8FF;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="aksGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#326CE5;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2454B8;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="nginxGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#009639;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#007530;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="appGatewayGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#50E6FF;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#32B3D9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="eventHubGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FF8C00;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#E67300;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="appConfigGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#9B4F96;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7B3F76;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="acrGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0089D6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#006AB1;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="internetGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#667788;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#445566;stop-opacity:1" />
    </linearGradient>
    
    <!-- Drop Shadow -->
    <filter id="dropShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
      <feOffset dx="2" dy="2" result="offsetblur"/>
      <feComponentTransfer>
        <feFuncA type="linear" slope="0.3"/>
      </feComponentTransfer>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    
    <!-- Arrow Marker -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#0078D4"/>
    </marker>
    <marker id="arrowheadOrange" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#FF8C00"/>
    </marker>
    <marker id="arrowheadPurple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#9B4F96"/>
    </marker>
    <marker id="arrowheadGreen" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#009639"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="1200" height="900" fill="#F5F9FC"/>
  
  <!-- Title -->
  <text x="600" y="40" font-family="Segoe UI, Arial, sans-serif" font-size="28" font-weight="600" fill="#1E3A5F" text-anchor="middle">Azure Event Hub POC Architecture</text>
  <text x="600" y="65" font-family="Segoe UI, Arial, sans-serif" font-size="14" fill="#5A6A7A" text-anchor="middle">AKS + Event Hub + App Config + Application Gateway + Container Registry</text>
  
  <!-- Internet / Home Router Box -->
  <g filter="url(#dropShadow)">
    <rect x="30" y="350" width="150" height="100" rx="10" fill="url(#internetGradient)"/>
    <text x="105" y="390" font-family="Segoe UI, Arial, sans-serif" font-size="14" font-weight="600" fill="white" text-anchor="middle">ğŸ  Home Router</text>
    <text x="105" y="410" font-family="Segoe UI, Arial, sans-serif" font-size="11" fill="#E0E0E0" text-anchor="middle">Public IP:</text>
    <text x="105" y="425" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#E0E0E0" text-anchor="middle">xxx.xxx.xxx.xxx</text>
    <text x="105" y="440" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#FFD700" text-anchor="middle">âš ï¸ Allowed IP Only</text>
  </g>
  
  <!-- Azure Cloud Boundary -->
  <rect x="200" y="90" width="980" height="790" rx="15" fill="none" stroke="#0078D4" stroke-width="3" stroke-dasharray="10,5"/>
  <rect x="205" y="82" width="200" height="25" fill="#F5F9FC"/>
  <text x="215" y="100" font-family="Segoe UI, Arial, sans-serif" font-size="16" font-weight="600" fill="#0078D4">â˜ï¸ Microsoft Azure</text>
  
  <!-- Resource Group Box -->
  <rect x="220" y="115" width="940" height="750" rx="10" fill="none" stroke="#5A6A7A" stroke-width="2" stroke-dasharray="5,3"/>
  <rect x="225" y="107" width="200" height="20" fill="#F5F9FC"/>
  <text x="235" y="122" font-family="Segoe UI, Arial, sans-serif" font-size="13" font-weight="500" fill="#5A6A7A">ğŸ“ Resource Group: eventhub-poc-rg</text>
  
  <!-- Virtual Network Box -->
  <rect x="240" y="140" width="560" height="520" rx="10" fill="url(#vnetGradient)" stroke="#0078D4" stroke-width="2"/>
  <text x="260" y="165" font-family="Segoe UI, Arial, sans-serif" font-size="14" font-weight="600" fill="#0078D4">ğŸŒ Virtual Network (10.0.0.0/8)</text>
  <text x="260" y="182" font-family="Segoe UI, Arial, sans-serif" font-size="11" fill="#5A6A7A">myapp-vnet</text>
  
  <!-- Application Gateway Subnet -->
  <rect x="260" y="200" width="520" height="140" rx="8" fill="url(#subnetGradient)" stroke="#32B3D9" stroke-width="2"/>
  <text x="280" y="225" font-family="Segoe UI, Arial, sans-serif" font-size="12" font-weight="500" fill="#32B3D9">Application Gateway Subnet (10.240.0.0/16)</text>
  
  <!-- Application Gateway -->
  <g filter="url(#dropShadow)">
    <rect x="360" y="250" width="200" height="70" rx="8" fill="url(#appGatewayGradient)"/>
    <text x="460" y="280" font-family="Segoe UI, Arial, sans-serif" font-size="13" font-weight="600" fill="white" text-anchor="middle">ğŸ›¡ï¸ Application Gateway</text>
    <text x="460" y="298" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">WAF_v2 SKU</text>
    <text x="460" y="312" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#E0F7FF" text-anchor="middle">IP Restriction: xxx.xxx.xxx.xxx</text>
  </g>
  
  <!-- AKS Subnet -->
  <rect x="260" y="360" width="520" height="280" rx="8" fill="url(#subnetGradient)" stroke="#326CE5" stroke-width="2"/>
  <text x="280" y="385" font-family="Segoe UI, Arial, sans-serif" font-size="12" font-weight="500" fill="#326CE5">AKS Subnet (10.0.0.0/16)</text>
  
  <!-- AKS Cluster -->
  <g filter="url(#dropShadow)">
    <rect x="280" y="400" width="480" height="220" rx="8" fill="url(#aksGradient)"/>
    <text x="520" y="430" font-family="Segoe UI, Arial, sans-serif" font-size="14" font-weight="600" fill="white" text-anchor="middle">âˆ Azure Kubernetes Service (AKS)</text>
    <text x="520" y="448" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#B3D4FF" text-anchor="middle">myapp-aks â€¢ 1 Node â€¢ Standard_B2s</text>
    
    <!-- NGINX Ingress -->
    <g filter="url(#dropShadow)">
      <rect x="310" y="465" width="180" height="60" rx="6" fill="url(#nginxGradient)"/>
      <text x="400" y="492" font-family="Segoe UI, Arial, sans-serif" font-size="12" font-weight="600" fill="white" text-anchor="middle">NGINX Ingress</text>
      <text x="400" y="510" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#B3FFB3" text-anchor="middle">Controller (Port 8080)</text>
    </g>
    
    <!-- Application Pod -->
    <g filter="url(#dropShadow)">
      <rect x="310" y="540" width="180" height="65" rx="6" fill="#4169E1"/>
      <text x="400" y="567" font-family="Segoe UI, Arial, sans-serif" font-size="12" font-weight="600" fill="white" text-anchor="middle">ğŸ“¦ Application Pod</text>
      <text x="400" y="585" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#B3C4FF" text-anchor="middle">Your App (via Helm)</text>
      <text x="400" y="598" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#B3C4FF" text-anchor="middle">Consumes Event Hub</text>
    </g>
    
    <!-- Managed Identity -->
    <g filter="url(#dropShadow)">
      <rect x="550" y="465" width="180" height="60" rx="6" fill="#FFB347"/>
      <text x="640" y="492" font-family="Segoe UI, Arial, sans-serif" font-size="11" font-weight="600" fill="#333" text-anchor="middle">ğŸ” Managed Identity</text>
      <text x="640" y="510" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#555" text-anchor="middle">Workload Identity</text>
    </g>
    
    <!-- AGIC Note -->
    <g filter="url(#dropShadow)">
      <rect x="550" y="540" width="180" height="65" rx="6" fill="#87CEEB"/>
      <text x="640" y="567" font-family="Segoe UI, Arial, sans-serif" font-size="10" font-weight="600" fill="#333" text-anchor="middle">AGIC Add-on</text>
      <text x="640" y="583" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#444" text-anchor="middle">App Gateway Ingress</text>
      <text x="640" y="597" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#444" text-anchor="middle">Controller</text>
    </g>
  </g>
  
  <!-- Azure Container Registry -->
  <g filter="url(#dropShadow)">
    <rect x="840" y="180" width="180" height="90" rx="8" fill="url(#acrGradient)"/>
    <text x="930" y="215" font-family="Segoe UI, Arial, sans-serif" font-size="13" font-weight="600" fill="white" text-anchor="middle">ğŸ“¦ Container Registry</text>
    <text x="930" y="235" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#B3D9FF" text-anchor="middle">eventhubpocacr</text>
    <text x="930" y="255" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#B3D9FF" text-anchor="middle">Docker Images + Helm Charts</text>
  </g>
  
  <!-- Event Hub -->
  <g filter="url(#dropShadow)">
    <rect x="840" y="320" width="180" height="110" rx="8" fill="url(#eventHubGradient)"/>
    <text x="930" y="355" font-family="Segoe UI, Arial, sans-serif" font-size="13" font-weight="600" fill="white" text-anchor="middle">âš¡ Event Hub</text>
    <text x="930" y="375" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#FFE0B3" text-anchor="middle">Namespace: myappns</text>
    <text x="930" y="393" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#FFE0B3" text-anchor="middle">Hub: myapp</text>
    <text x="930" y="415" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#FFE0B3" text-anchor="middle">Basic SKU â€¢ 2 Partitions</text>
  </g>
  
  <!-- App Configuration -->
  <g filter="url(#dropShadow)">
    <rect x="840" y="480" width="180" height="90" rx="8" fill="url(#appConfigGradient)"/>
    <text x="930" y="515" font-family="Segoe UI, Arial, sans-serif" font-size="13" font-weight="600" fill="white" text-anchor="middle">âš™ï¸ App Configuration</text>
    <text x="930" y="535" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#E0B3E0" text-anchor="middle">myapp-appconfig</text>
    <text x="930" y="555" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#E0B3E0" text-anchor="middle">Key-Value Store</text>
  </g>
  
  <!-- Connections -->
  
  <!-- Home Router to App Gateway -->
  <line x1="180" y1="400" x2="355" y2="285" stroke="#32B3D9" stroke-width="3" marker-end="url(#arrowhead)"/>
  <text x="230" y="330" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#32B3D9" transform="rotate(-25, 230, 330)">HTTPS (443)</text>
  
  <!-- App Gateway to NGINX Ingress -->
  <line x1="460" y1="320" x2="400" y2="460" stroke="#009639" stroke-width="2" marker-end="url(#arrowheadGreen)"/>
  <text x="415" y="395" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#009639">Port 8080</text>
  
  <!-- NGINX to App Pod -->
  <line x1="400" y1="525" x2="400" y2="535" stroke="#4169E1" stroke-width="2"/>
  
  <!-- AKS to ACR -->
  <path d="M 760 430 Q 810 300 835 225" fill="none" stroke="#0089D6" stroke-width="2" stroke-dasharray="5,3" marker-end="url(#arrowhead)"/>
  <text x="810" y="330" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#0089D6">Pull Images</text>
  
  <!-- App Pod to Event Hub -->
  <path d="M 490 575 Q 680 575 835 380" fill="none" stroke="#FF8C00" stroke-width="2" marker-end="url(#arrowheadOrange)"/>
  <text x="650" y="540" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#FF8C00">Consume Messages</text>
  
  <!-- App Pod to App Config -->
  <path d="M 490 580 Q 700 590 835 525" fill="none" stroke="#9B4F96" stroke-width="2" marker-end="url(#arrowheadPurple)"/>
  <text x="680" y="600" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#9B4F96">Read Config</text>
  
  <!-- Legend -->
  <rect x="240" y="680" width="760" height="165" rx="8" fill="white" stroke="#DDD" stroke-width="1"/>
  <text x="260" y="705" font-family="Segoe UI, Arial, sans-serif" font-size="14" font-weight="600" fill="#333">ğŸ“‹ Legend &amp; Data Flow</text>
  
  <line x1="260" y1="725" x2="300" y2="725" stroke="#32B3D9" stroke-width="3"/>
  <text x="310" y="730" font-family="Segoe UI, Arial, sans-serif" font-size="11" fill="#555">Inbound Traffic (HTTPS from allowed IP only)</text>
  
  <line x1="260" y1="750" x2="300" y2="750" stroke="#009639" stroke-width="2"/>
  <text x="310" y="755" font-family="Segoe UI, Arial, sans-serif" font-size="11" fill="#555">App Gateway â†’ NGINX Ingress routing</text>
  
  <line x1="260" y1="775" x2="300" y2="775" stroke="#FF8C00" stroke-width="2"/>
  <text x="310" y="780" font-family="Segoe UI, Arial, sans-serif" font-size="11" fill="#555">Event Hub message consumption</text>
  
  <line x1="260" y1="800" x2="300" y2="800" stroke="#9B4F96" stroke-width="2"/>
  <text x="310" y="805" font-family="Segoe UI, Arial, sans-serif" font-size="11" fill="#555">App Configuration reads</text>
  
  <line x1="260" y1="825" x2="300" y2="825" stroke="#0089D6" stroke-width="2" stroke-dasharray="5,3"/>
  <text x="310" y="830" font-family="Segoe UI, Arial, sans-serif" font-size="11" fill="#555">Container image pulls (ACR â†’ AKS)</text>
  
  <!-- Right side legend -->
  <text x="600" y="730" font-family="Segoe UI, Arial, sans-serif" font-size="11" font-weight="600" fill="#333">ğŸ” Security Features:</text>
  <text x="600" y="750" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#555">â€¢ IP Whitelisting on Application Gateway</text>
  <text x="600" y="768" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#555">â€¢ Managed Identity for Azure services access</text>
  <text x="600" y="786" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#555">â€¢ Private VNet integration</text>
  <text x="600" y="804" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#555">â€¢ ACR private endpoint (optional)</text>
  <text x="600" y="825" font-family="Segoe UI, Arial, sans-serif" font-size="11" font-weight="600" fill="#333">ğŸ“ Helm deployment to AKS from ACR</text>
  
</svg>

